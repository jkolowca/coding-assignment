import{i as z,l as A}from"./chunk-XYWDGHIJ.js";import{Da as R,Fa as F,Ga as U,Ha as c,Ia as a,Ja as y,Ka as h,L as D,La as q,M as I,O as f,Pa as u,Qa as B,Ra as L,S as O,Sa as N,T as S,W as M,X as P,aa as T,g as p,ga as E,ma as H,o as C,r as k,ra as v,sa as s,x as _,y as g,ya as d,z as j}from"./chunk-ILOWWZCV.js";var b=(()=>{let e=class e{constructor(r){this.http=r,this.url="https://randomuser.me/api",this.user=d(void 0)}fetchUser(){this.user.set(void 0),this.http.get(this.url,{params:{inc:["picture,name"],results:1}}).pipe(j(r=>(console.error("API error",r),C(()=>new Error("Error occured. Try again later"))))).subscribe(r=>{this.user.set(r.results&&r.results[0])})}};e.\u0275fac=function(n){return new(n||e)(O(A))},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"any"});let t=e;return t})();function w(t){t||(T(w),t=S(E));let e=new p(i=>t.onDestroy(i.next.bind(i)));return i=>i.pipe(D(e))}var l=(()=>{let e=class e{constructor(){this.interval=5e3,this.tick=100,this.currentTime=d(0),this._timer=new p,this._paused=!1}start(){return this._timer=this.timer(),this._timer}pause(){this._paused=!0}resume(){this._paused=!1}reset(){this.currentTime.set(0)}timer(){return _(0,this.tick).pipe(g(()=>!this._paused),k(()=>this.currentTime()),I(()=>this.currentTime.update(r=>r+this.tick)),g(r=>!(r%this.interval)),w())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"any"});let t=e;return t})();var $=(()=>{let e=class e{onMouseEnter(){this.timer.pause()}onMouseLeave(){this.timer.resume()}constructor(r){this.timer=r}};e.\u0275fac=function(n){return new(n||e)(s(l))},e.\u0275dir=P({type:e,selectors:[["","pause-on-hover",""]],hostBindings:function(n,o){n&1&&h("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},standalone:!0});let t=e;return t})();function J(t,e){if(t&1&&(y(0,"img",1),c(1,"div",2)(2,"span",3),u(3,"Hi, my name is"),a(),c(4,"span",4),u(5),a()()),t&2){let i=e;q("srcset",`
            `,i.picture.medium,` 72w, 
            `,i.picture.large," 128w"),v(5),B("",i.name.first," ",i.name.last,"")}}function K(t,e){t&1&&(y(0,"div",5),c(1,"div",2)(2,"span",3),u(3,"Hi, my name is"),a(),c(4,"span",4),u(5,"Loading..."),a()())}var _e=(()=>{let e=class e{constructor(r,n,o){this.randomUserService=r,this.timer=n,this.user=this.randomUserService.user,z(o)&&n.start().subscribe(()=>r.fetchUser())}resetTimer(){console.log("click"),this.timer.reset()}};e.\u0275fac=function(n){return new(n||e)(s(b),s(l),s(H))},e.\u0275cmp=M({type:e,selectors:[["app-people"]],standalone:!0,features:[L([l,b]),N],decls:4,vars:2,consts:[["pause-on-hover","",3,"click","disabled"],["pause-on-hover","","sizes",`
            (max-width: 400px) 72px, 
            128px`,"alt","User picture",3,"srcset"],[1,"text-block"],[1,"text-secondary"],["pause-on-hover","",1,"text-primary"],[1,"img-placeholder"]],template:function(n,o){if(n&1&&(R(0,J,6,5)(1,K,6,0),c(2,"button",0),h("click",function(){return o.resetTimer()}),u(3,"New"),a()),n&2){let m;U(0,(m=o.user())?0:1,m),v(2),F("disabled",!o.user())}},dependencies:[$],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-flow:column;align-items:center;justify-content:center;gap:2rem}.text-block[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:center;gap:.5rem}img[_ngcontent-%COMP%], .img-placeholder[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:8px}@media (max-width: 400px){img[_ngcontent-%COMP%], .img-placeholder[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:5px}}.img-placeholder[_ngcontent-%COMP%]{background-color:#dfdfdf}button[_ngcontent-%COMP%]{background-color:#4299e1;color:#fff;font-size:1rem;font-weight:700;padding:.5rem;border:none;border-radius:.25rem;min-width:80px}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2b6cb0}button[_ngcontent-%COMP%]:disabled{opacity:50%;cursor:not-allowed}"],changeDetection:0});let t=e;return t})();export{_e as PeopleComponent};
